{
  "version": 3,
  "sources": ["html/flow-view.ts", "html/fv-canvas.ts", "html/fv-node.ts", "html/fv-pin.ts", "html/fv-selection.ts", "view.ts"],
  "sourcesContent": ["export default '<style>:host {display:block;width:1000px;height:700px;}</style><slot></slot>'", "export default '<style>:host {position:relative;display:block;overflow:hidden;border:1px solid black;width:800px;height:600px;}</style><slot></slot><fv-selection x=\"100\" y=\"100\" w=\"100\" h=\"100\"></fv-selection>'", "export default '<style>:host {position:absolute;}:host > div {position:relative;border:1px solid;display:flex;flex-direction:column;}.pins {display:flex;justify-content:space-between;height:10px;}.body {padding:1em;border-top:1px solid;border-bottom:1px solid;user-select:none;}</style><div><div class=\"args pins\"><fv-pin></fv-pin><fv-pin></fv-pin><fv-pin></fv-pin></div><div class=\"body\"><slot></slot></div><div class=\"outs pins\"><fv-pin draggable=\"true\"></fv-pin></div></div>'", "export default '<style>:host {width:10px;height:10px;background-color:gainsboro;}</style>'", "export default '<style>:host {position:absolute;background-color:#ff00ff4a;border:1px solid magenta;}</style>'", "import flowView from \"./html/flow-view.js\"\nimport fvCanvas from \"./html/fv-canvas.js\"\nimport fvNode from \"./html/fv-node.js\"\nimport fvPin from \"./html/fv-pin.js\"\nimport fvSelection from \"./html/fv-selection.js\"\n\nexport declare namespace FlowView {\n\ttype NodeId = string\n}\n\nconst htmlTemplate = (content: string) => {\n\tconst template = document.createElement(\"template\")\n\ttemplate.innerHTML = content\n\treturn template\n}\n\nclass FVcanvas extends HTMLElement {\n\tobserver: MutationObserver\n\tselectedNodes = new Set<FVnode>()\n\tconstructor() {\n\t\tsuper()\n\t\tthis.attachShadow({ mode: \"open\" })\n\t\tthis.shadowRoot?.appendChild(FVcanvas.template.content.cloneNode(true))\n\t\tthis.observer = new MutationObserver((mutationList) => {\n\t\t\tfor (const mutation of mutationList) {\n\t\t\t\tif (mutation.type === \"childList\") {\n\t\t\t\t\tmutation.addedNodes.forEach((node) => {\n\t\t\t\t\t\tif (node instanceof HTMLElement)\n\t\t\t\t\t\t\tif (node.tagName === FVnode.tagName)\n\t\t\t\t\t\t\t\tnode.addEventListener(\"pointerdown\", this)\n\t\t\t\t\t})\n\t\t\t\t\tmutation.removedNodes.forEach((node) => {\n\t\t\t\t\t\tif (node instanceof HTMLElement)\n\t\t\t\t\t\t\tif (node.tagName === FVnode.tagName)\n\t\t\t\t\t\t\t\tnode.removeEventListener(\"pointerdown\", this)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\tconnectedCallback() {\n\t\tthis.observer.observe(this, {\n\t\t\tattributes: false,\n\t\t\tchildList: true,\n\t\t\tsubtree: true\n\t\t})\n\t\tdocument.querySelectorAll<FVnode>(FVnode.tagName).forEach((element) => {\n\t\t\telement.addEventListener(\"pointerdown\", this)\n\t\t})\n\t}\n\tdisconnectedCallback() {\n\t\tthis.observer.disconnect()\n\t}\n\thandleEvent(event: Event) {\n\t\tif (event.type === \"pointerdown\" && event.target instanceof FVnode) {\n\t\t\tthis.selectedNodes.add(event.target)\n\t\t\tconst x = event.target.getAttribute(\"x\")\n\t\t\tconst y = event.target.getAttribute(\"y\")\n\t\t\tconst selection = this.shadowRoot?.querySelector<FVselection>(\n\t\t\t\tFVselection.tagName\n\t\t\t)\n\t\t\tif (x && y) {\n\t\t\t\tselection?.setAttribute(\"x\", x)\n\t\t\t\tselection?.setAttribute(\"y\", y)\n\t\t\t}\n\t\t}\n\t}\n\tstatic tagName = \"FV-CANVAS\"\n\tstatic template = htmlTemplate(fvCanvas)\n}\n\nclass FVselection extends HTMLElement {\n\tconstructor() {\n\t\tsuper()\n\t\tthis.attachShadow({ mode: \"open\" })\n\t\tthis.shadowRoot?.appendChild(\n\t\t\tFVselection.template.content.cloneNode(true)\n\t\t)\n\t}\n\tattributeChangedCallback(name: string, _oldValue: string, value: string) {\n\t\tif (!isNaN(parseInt(value))) {\n\t\t\tif (name === \"x\") this.style.left = `${value}px`\n\t\t\tif (name === \"y\") this.style.top = `${value}px`\n\t\t\tif (name === \"w\") this.style.width = `${value}px`\n\t\t\tif (name === \"h\") this.style.height = `${value}px`\n\t\t}\n\t}\n\tclear() {\n\t\t;[\"x\", \"y\", \"w\", \"h\"].forEach((attr) => this.setAttribute(attr, \"0\"))\n\t}\n\tstatic get observedAttributes() {\n\t\treturn [\"x\", \"y\", \"w\", \"h\"]\n\t}\n\tstatic tagName = \"FV-SELECTION\"\n\tstatic template = htmlTemplate(fvSelection)\n}\n\nclass FVpin extends HTMLElement {\n\tconstructor() {\n\t\tsuper()\n\t\tthis.attachShadow({ mode: \"open\" })\n\t\tthis.shadowRoot?.appendChild(FVpin.template.content.cloneNode(true))\n\t\tthis.addEventListener(\"drag\", this)\n\t\tthis.addEventListener(\"dragstart\", this)\n\t\tthis.addEventListener(\"pointerdown\", this)\n\t}\n\thandleEvent(event: Event) {\n\t\tif (event.type === 'pointerdown') event.stopPropagation()\n\t\tif (event instanceof DragEvent) {\n\t\t\tconsole.log(event)\n\t\t}\n\t}\n\tstatic tagName = \"FV-PIN\"\n\tstatic template = htmlTemplate(fvPin)\n}\n\nclass FVnode extends HTMLElement {\n\tconstructor() {\n\t\tsuper()\n\t\tthis.attachShadow({ mode: \"open\" })\n\t\tthis.shadowRoot?.appendChild(FVnode.template.content.cloneNode(true))\n\t}\n\tattributeChangedCallback(name: string, _oldValue: string, value: string) {\n\t\tif (!isNaN(parseInt(value))) {\n\t\t\tif (name === \"x\") this.style.left = `${value}px`\n\t\t\tif (name === \"y\") this.style.top = `${value}px`\n\t\t}\n\t}\n\tstatic get observedAttributes() {\n\t\treturn [\"x\", \"y\"]\n\t}\n\tstatic tagName = \"FV-NODE\"\n\tstatic template = htmlTemplate(fvNode)\n}\n\nexport class FlowView extends HTMLElement {\n\tconstructor() {\n\t\tsuper()\n\t\tthis.attachShadow({ mode: \"open\" })\n\t\tthis.shadowRoot?.appendChild(FlowView.template.content.cloneNode(true))\n\t}\n\tstatic tagName = \"FLOW-VIEW\"\n\tstatic template = htmlTemplate(flowView)\n\tstatic customElements = new Map<string, typeof HTMLElement>()\n\t\t.set(FlowView.tagName, FlowView)\n\t\t.set(FVcanvas.tagName, FVcanvas)\n\t\t.set(FVnode.tagName, FVnode)\n\t\t.set(FVpin.tagName, FVpin)\n\t\t.set(FVselection.tagName, FVselection)\n\tstatic defineCustomElements() {\n\t\tfor (let [tagName, CustomElement] of FlowView.customElements.entries())\n\t\t\tif (!customElements.get(tagName))\n\t\t\t\tcustomElements.define(tagName.toLowerCase(), CustomElement)\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
