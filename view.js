var flow_view_default="<style>:host {display:block;width:1000px;height:700px;}</style><slot></slot>";var fv_canvas_default='<style>:host {position:relative;display:block;overflow:hidden;border:1px solid black;width:800px;height:600px;}</style><slot></slot><fv-selection x="100" y="100" w="100" h="100"></fv-selection>';var fv_node_default='<style>:host {position:absolute;}:host > div {position:relative;border:1px solid;display:flex;flex-direction:column;}.pins {display:flex;justify-content:space-between;height:10px;}.body {padding:1em;border-top:1px solid;border-bottom:1px solid;user-select:none;}</style><div><div class="args pins"><fv-pin></fv-pin><fv-pin></fv-pin><fv-pin></fv-pin></div><div class="body"><slot></slot></div><div class="outs pins"><fv-pin draggable="true"></fv-pin></div></div>';var fv_pin_default="<style>:host {width:10px;height:10px;background-color:gainsboro;}</style>";var fv_selection_default="<style>:host {position:absolute;background-color:#ff00ff4a;border:1px solid magenta;}</style>";var htmlTemplate=content=>{const template=document.createElement("template");template.innerHTML=content;return template};var FVcanvas=class _FVcanvas extends HTMLElement{observer;selectedNodes=new Set;constructor(){super();this.attachShadow({mode:"open"});this.shadowRoot?.appendChild(_FVcanvas.template.content.cloneNode(true));this.observer=new MutationObserver(mutationList=>{for(const mutation of mutationList){if(mutation.type==="childList"){mutation.addedNodes.forEach(node=>{if(node instanceof HTMLElement){if(node.tagName===FVnode.tagName)node.addEventListener("pointerdown",this)}});mutation.removedNodes.forEach(node=>{if(node instanceof HTMLElement){if(node.tagName===FVnode.tagName)node.removeEventListener("pointerdown",this)}})}}})}connectedCallback(){this.observer.observe(this,{attributes:false,childList:true,subtree:true});document.querySelectorAll(FVnode.tagName).forEach(element=>{element.addEventListener("pointerdown",this)})}disconnectedCallback(){this.observer.disconnect()}handleEvent(event){if(event.type==="pointerdown"&&event.target instanceof FVnode){this.selectedNodes.add(event.target);const x=event.target.getAttribute("x");const y=event.target.getAttribute("y");const selection=this.shadowRoot?.querySelector(FVselection.tagName);if(x&&y){selection?.setAttribute("x",x);selection?.setAttribute("y",y)}}}static tagName="FV-CANVAS";static template=htmlTemplate(fv_canvas_default)};var FVselection=class _FVselection extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"});this.shadowRoot?.appendChild(_FVselection.template.content.cloneNode(true))}attributeChangedCallback(name,_oldValue,value){if(!isNaN(parseInt(value))){if(name==="x")this.style.left=`${value}px`;if(name==="y")this.style.top=`${value}px`;if(name==="w")this.style.width=`${value}px`;if(name==="h")this.style.height=`${value}px`}}clear(){;["x","y","w","h"].forEach(attr=>this.setAttribute(attr,"0"))}static get observedAttributes(){return["x","y","w","h"]}static tagName="FV-SELECTION";static template=htmlTemplate(fv_selection_default)};var FVpin=class _FVpin extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"});this.shadowRoot?.appendChild(_FVpin.template.content.cloneNode(true));this.addEventListener("drag",this);this.addEventListener("dragstart",this);this.addEventListener("pointerdown",this)}handleEvent(event){if(event.type==="pointerdown")event.stopPropagation();if(event instanceof DragEvent){console.log(event)}}static tagName="FV-PIN";static template=htmlTemplate(fv_pin_default)};var FVnode=class _FVnode extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"});this.shadowRoot?.appendChild(_FVnode.template.content.cloneNode(true))}attributeChangedCallback(name,_oldValue,value){if(!isNaN(parseInt(value))){if(name==="x")this.style.left=`${value}px`;if(name==="y")this.style.top=`${value}px`}}static get observedAttributes(){return["x","y"]}static tagName="FV-NODE";static template=htmlTemplate(fv_node_default)};var FlowView=class _FlowView extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"});this.shadowRoot?.appendChild(_FlowView.template.content.cloneNode(true))}static tagName="FLOW-VIEW";static template=htmlTemplate(flow_view_default);static customElements=new Map().set(_FlowView.tagName,_FlowView).set(FVcanvas.tagName,FVcanvas).set(FVnode.tagName,FVnode).set(FVpin.tagName,FVpin).set(FVselection.tagName,FVselection);static defineCustomElements(){for(let[tagName,CustomElement]of _FlowView.customElements.entries())if(!customElements.get(tagName))customElements.define(tagName.toLowerCase(),CustomElement)}};export{FlowView};
//# sourceMappingURL=view.js.map
